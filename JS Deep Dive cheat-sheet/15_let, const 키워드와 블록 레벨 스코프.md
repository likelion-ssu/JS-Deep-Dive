# 15. let, const ν‚¤μ›λ“μ™€ λΈ”λ΅ λ λ²¨ μ¤μ½”ν”„

## π“ 15.1 var ν‚¤μ›λ“λ΅ μ„ μ–Έν• λ³€μμ λ¬Έμ μ 

ES5κΉμ§€λ” `var` ν‚¤μ›λ“λ΅λ§ λ³€μλ¥Ό μ„ μ–Έν•  μ μμ—λ‹¤.  
`var` ν‚¤μ›λ“λ΅ μ„ μ–Έν• λ³€μλ” λ‹¤μκ³Ό κ°™μ€ νΉμ§•μ„ κ°–λ”λ‹¤.

### λ³€μ μ¤‘λ³µ μ„ μ–Έ ν—μ©

`var` ν‚¤μ›λ“λ΅ μ„ μ–Έν• λ³€μλ” μ¤‘λ³µ μ„ μ–Έμ΄ κ°€λ¥ν•λ©°, μ—λ¬λ¥Ό λ°μƒμ‹ν‚¤μ§€ μ•λ”λ‹¤.  
**μ΄κΈ°ν™”λ¬Έμ΄ μλ” λ³€μ μ„ μ–Έλ¬Έ** μ€ μλ°”μ¤ν¬λ¦½νΈ μ—”μ§„μ— μν•΄ `var` ν‚¤μ›λ“κ°€ μ—†λ” κ²ƒμ²λΌ λ™μ‘ν•λ‹¤.  
**μ΄κΈ°ν™”λ¬Έμ΄ μ—†λ” λ³€μ μ„ μ–Έλ¬Έ** μ€ λ¬΄μ‹λλ‹¤.

- λ™μΌν• μ΄λ¦„μ λ³€μκ°€ μ΄λ―Έ μ„ μ–Έλμ–΄ μλ” κ²ƒμ„ λ¨λ¥΄κ³  λ³€μλ¥Ό μ¤‘λ³µ μ„ μ–Έ λ° ν• λ‹Ήν•λ©΄ μλ„μΉ μ•κ² λ¨Όμ € **μ„ μ–Έλ λ³€μ κ°’μ΄ λ³€κ²½λλ” λ¶€μ‘μ©** μ΄ λ°μƒν•λ‹¤.

```js
var x = 1;
var y = 1;
var x = 100; // μ—λ¬ μ—†μ΄ μ¬ν• λ‹Ήλλ‹¤.
var y; // μ—λ¬ μ—†μ΄ λ¬΄μ‹λλ‹¤.
```

### ν•¨μ λ λ²¨ μ¤μ½”ν”„

`var` ν‚¤μ›λ“λ΅ μ„ μ–Έν• λ³€μλ” `ν•¨μ λ λ²¨ μ¤μ½”ν”„`λ§μ„ μΈμ •ν•λ‹¤.  
`ifλ¬Έ`, `forλ¬Έ` λ“±μ„ ν¬ν•¨ν• μ½”λ“ λΈ”λ΅ λ‚΄μ—μ„ μ„ μ–Έν•΄λ„ ν•΄λ‹Ή μ§€μ—­ λ³€μλ΅ μΈμ •λμ§€ μ•λ”λ‹¤.

- `ν•¨μ λ λ²¨ μ¤μ½”ν”„`λ” μ „μ—­ λ³€μλ¥Ό λ‚¨λ°ν•  κ°€λ¥μ„±μ„ λ†’μ΄λ©°, **μλ„μΉ μ•κ² μ „μ—­ λ³€μκ°€ μ¤‘λ³µ μ„ μ–Έ** λ  μ μλ‹¤.

```js
var i = 10;

for (var i = 0; i < 5; i++) {
  console.log(i); // 0 1 2 3 4
}

console.log(i); // 5
```

### λ³€μ νΈμ΄μ¤ν…

`var` ν‚¤μ›λ“λ΅ λ³€μλ¥Ό μ„ μ–Έν•λ©΄ [λ³€μ νΈμ΄μ¤ν…](https://github.com/likelion-ssu/JS-Deep-Dive/blob/main/JS%20Deep%20Dive%20cheat-sheet/04_λ³€μ.md#44-νΈμ΄μ¤ν…)μ— μν•΄ λ³€μ μ„ μ–Έλ¬Έμ΄ μ¤μ½”ν”„μ μ„ λ‘λ΅ λμ–΄μ¬λ ¤μ§„ κ²ƒμ²λΌ λ™μ‘ν•λ‹¤.  
λ”°λΌμ„ λ³€μ μ„ μ–Έλ¬Έ μ΄μ „μ— μ°Έμ΅°ν•  μ μκ³ , `undefined`λ¥Ό λ°ν™ν•λ‹¤.

- μ΄λ” μ—λ¬λ¥Ό λ°μƒμ‹ν‚¤μ§€λ” μ•μ§€λ§ ν”„λ΅κ·Έλ¨μ νλ¦„μƒ λ§μ§€ μ•μ•„ **κ°€λ…μ„±μ„ λ–¨μ–΄λ¨λ¦¬κ³  μ¤λ¥λ¥Ό λ°μƒμ‹ν‚¬ μ—¬μ§€** λ¥Ό λ‚¨κΈ΄λ‹¤.

```js
console.log(foo); // undefined
var foo;
```

<br/>

## π“ 15.2 let ν‚¤μ›λ“

ES6μ—μ„ μƒλ΅μ΄ λ³€μ μ„ μ–Έ ν‚¤μ›λ“ `let`κ³Ό `const`κ°€ λ„μ…λμ—λ‹¤.
`var`ν‚¤μ›λ“μ™€ `let`ν‚¤μ›λ“μ μ£Όμ” μ°¨μ΄μ μ€ λ‹¤μκ³Ό κ°™λ‹¤.

### λ³€μ μ¤‘λ³µ μ„ μ–Έ κΈμ§€

`let` ν‚¤μ›λ“λ” μ΄λ¦„μ΄ κ°™μ€ λ³€μλ¥Ό μ¤‘λ³µ μ„ μ–Έν•λ©΄ `λ¬Έλ²• μ—λ¬(SyntaxError)`κ°€ λ°μƒν•λ‹¤.

```js
let foo = 123;
let foo = 456; // SyntaxError: Identifier 'foo' has already been declared
```

### λΈ”λ΅ λ λ²¨ μ¤μ½”ν”„

`let` ν‚¤μ›λ“λ΅ μ„ μ–Έν• λ³€μλ” λ¨λ“  μ½”λ“ λΈ”λ΅(ν•¨μ, ifλ¬Έ, forλ¬Έ, whileλ¬Έ, try/catchλ¬Έ λ“±)μ„ μ§€μ—­ μ¤μ½”ν”„λ΅ μΈμ •ν•λ” `λΈ”λ΅ λ λ²¨ μ¤μ½”ν”„(block-level-scope)`λ¥Ό λ”°λ¥Έλ‹¤.

```js
{
  let foo = 1;
}
console.log(foo); // ReferenceError: foo is not defined
```

<!-- prettier-ignore -->
```js
let i = 10; // μ „μ—­ μ¤μ½”ν”„
function foo() { // ν•¨μ λ λ²¨ μ¤μ½”ν”„
  let i = 100;
  for (let i = 1; i < 3; i++) { // λΈ”λ΅ λ λ²¨ μ¤μ½”ν”„
    console.log(i); // out: 1 2
  }
  console.log(i); // out: 100
}
foo();
console.log(i); // out: 10
```

### λ³€μ νΈμ΄μ¤ν…

- `var` ν‚¤μ›λ“λ΅ μ„ μ–Έν• λ³€μλ” λ°νƒ€μ„ μ΄μ „μ— `μ„ μ–Έ λ‹¨κ³„`μ™€ `μ΄κΈ°ν™” λ‹¨κ³„`κ°€ ν•λ²μ— μ§„ν–‰λμ—λ‹¤.
- `let` ν‚¤μ›λ“λ΅ μ„ μ–Έν• λ³€μλ” λ°νƒ€μ„ μ΄μ „μ— `μ„ μ–Έ λ‹¨κ³„`λ§ μ‹¤ν–‰λκ³ , λ°νƒ€μ„μ— λ³€μ μ„ μ–Έλ¬Έμ— λ„λ‹¬ν–μ„ λ• `μ΄κΈ°ν™” λ‹¨κ³„`κ°€ μ‹¤ν–‰λλ‹¤.

<p align='center'>
  <img src="https://user-images.githubusercontent.com/66757141/214543439-9a4ba752-dd34-4eaa-80c5-150364a7868d.png" alt="var-lifecycle" width="400px" />
  <img src="https://user-images.githubusercontent.com/66757141/214543399-bb1df4ad-789f-4b7f-924f-6bfd5c960fba.png" alt="let-lifecycle" width="400px" />
</p>

<br/>

- `μ΄κΈ°ν™” λ‹¨κ³„`κ°€ μ‹¤ν–‰λκΈ° μ΄μ „μ— λ³€μμ— μ ‘κ·Όν•λ ¤κ³  ν•λ©΄ `μ°Έμ΅° μ—λ¬(ReferenceError)`κ°€ λ°μƒν•λ‹¤.
- `let` ν‚¤μ›λ“λ΅ μ„ μ–Έν• λ³€μλ¥Ό μ°Έμ΅°ν•  μ μ—†λ” μ‚¬μ΄ κµ¬κ°„μ„ `μΌμ‹μ  μ‚¬κ°μ§€λ€(Temporal Dead Zone, TDZ)`λΌκ³  ν•λ‹¤.

  ```
  console.log(foo) // ReferenceError: foo is not defined
  let foo;
  ```

- λ³€μ μ„ μ–Έλ¬Έ(μ΄κΈ°ν™”) μ΄μ „μ—λ” μ°Έμ΅°ν•  μ μ—†μ–΄ νΈμ΄μ¤ν…μ΄ μΌμ–΄λ‚μ§€ μ•λ” κ²ƒμ²λΌ λ³΄μΌ μ μλ‹¤. ν•μ§€λ§ **νΈμ΄μ¤ν…μ€ λ…ν™•ν λ°μƒν•λ‹¤.**  
  μ•„λ μμ‹μ—μ„ νΈμ΄μ¤ν…μ΄ λ°μƒν•μ§€ μ•λ”λ‹¤λ©΄ μ „μ—­λ³€μ fooμ κ°’μ„ μ¶λ ¥ν•΄μ•Όν•μ§€λ§, **νΈμ΄μ¤ν…μΌλ΅ λΈ”λ΅ μ¤μ½”ν”„ fooμ μ„ μ–Έ λ‹¨κ³„κ°€ μ™„λ£** λμ—κΈ° λ•λ¬Έμ— `μ°Έμ΅° μ—λ¬(ReferenceError)`κ°€ λ°μƒν–λ‹¤.
  ```js
  let foo = 1;
  {
    console.log(foo); // ReferenceError: Cannot access 'foo' before initialization
    let foo = 2;
  }
  ```

### μ „μ—­ κ°μ²΄μ™€ let

`var` ν‚¤μ›λ“λ΅ μ„ μ–Έν• μ „μ—­ λ³€μμ™€ μ „μ—­ ν•¨μ, κ·Έλ¦¬κ³  μ„ μ–Έν•μ§€ μ•μ€ λ³€μμ— κ°’μ„ ν• λ‹Ήν• μ•”λ¬µμ  μ „μ—­μ€ μ „μ—­κ°μ²΄ `window`μ ν”„λ΅νΌν‹°κ°€ λλ‹¤.

```js
var x = 1; // μ „μ—­ λ³€μ
y = 2; // μ•”λ¬µμ  μ „μ—­
function foo() {} // μ „μ—­ ν•¨μ

console.log(window.x); // 1
console.log(window.y); // 2
console.log(window.foo); // foo() {}
```

`let` ν‚¤μ›λ“λ΅ μ„ μ–Έν• λ³€μλ” μ „μ—­ κ°μ²΄μ ν”„λ΅νΌν‹°κ°€ μ•„λ‹λ‹¤.
`let` μ „μ—­λ³€μλ” λ³΄μ΄μ§€ μ•λ” κ°λ…μ μΈ λΈ”λ΅ λ‚΄μ— μ΅΄μ¬ν•λ‹¤.

```js
let x = 1;
console.log(window.x); // undefined

// κ°μ²΄μ— μ΅΄μ¬ν•μ§€ μ•λ” ν”„λ΅νΌν‹°μ— μ ‘κ·Όν•λ©΄ undefinedλ¥Ό λ°ν™ν•λ©°, ReferenceErrorκ°€ λ°μƒν•μ§€ μ•λ”λ‹¤.
```

<br/>

## π“ 15.2 const ν‚¤μ›λ“

`const` ν‚¤μ›λ“μ νΉμ§•μ€ `let` ν‚¤μ›λ“μ™€ λ€λ¶€λ¶„ λ™μΌν•μ§€λ§ λ‹¤μκ³Ό κ°™μ€ μ°¨μ΄μ μ„ κ°–λ”λ‹¤.

### μ„ μ–Έκ³Ό μ΄κΈ°ν™”

`const` ν‚¤μ›λ“λ΅ μ„ μ–Έν• λ³€μ μ—­μ‹ `λΈ”λ΅ λ λ²¨ μ¤μ½”ν”„`λ¥Ό κ°€μ§€λ©°, λ³€μ νΈμ΄μ¤ν…μ΄ λ°μƒν•μ§€ μ•λ” κ²ƒμ²λΌ λ™μ‘ν•λ‹¤.  
λ‹¨, `const` ν‚¤μ›λ“λ΅ μ„ μ–Έν• λ³€μλ” **λ°λ“μ‹ μ„ μ–Έκ³Ό λ™μ‹μ— μ΄κΈ°ν™”ν•΄μ•Όν•λ‹¤.**

```js
const foo = 1;
const bar; // SyntaxError: Missing initializer in const declaration
```

### μ¬ν• λ‹Ή κΈμ§€

`const` ν‚¤μ›λ“λ΅ μ„ μ–Έν• λ³€μλ” **μ¬ν• λ‹Ήμ΄ κΈμ§€λλ‹¤.**

```js
const foo = 1;
foo = 2; // TypeError: Assignment to constant variable.
```

### μƒμ

`const` ν‚¤μ›λ“λ” μƒμλ¥Ό ν‘ν„ν•κΈ°μ— μ ν•©ν• νΉμ§•μ„ κ°–κ³  μλ‹¤.

- `const` ν‚¤μ›λ“λ΅ μ„ μ–Έλ λ³€μμ— μ›μ‹ κ°’μ„ ν• λ‹Ήν• κ²½μ°, μ›μ‹ κ°’μ€ λ³€κ²½ν•  μ μ—†λ” κ°’(immutable value)μ΄κ³  `const` ν‚¤μ›λ“μ— μν•΄ μ¬ν• λ‹Ήμ΄ κΈμ§€λλ―€λ΅ ν• λ‹Ήλ κ°’μ„ λ³€κ²½ν•  μ μλ” λ°©λ²•μ€ μ—†λ‹¤.
- μƒμλ” μƒνƒ μ μ§€μ™€ κ°€λ…μ„±, μ μ§€λ³΄μμ νΈμλ¥Ό μ„ν•΄ μ κ·Ήμ μΌλ΅ μ‚¬μ©ν•΄μ•Όν•λ‹¤.
- μΌλ°μ μΌλ΅ μƒμλ” λ€λ¬Έμλ΅ μ„ μ–Έν•κ³ , μ—¬λ¬ λ‹¨μ–΄λ΅ μ΄λ¤„μ§„ κ²½μ°μ—λ” μ–Έλ”μ¤μ½”μ–΄ `_` λ΅ κµ¬λ¶„ν•΄μ„ μ¤λ„¤μ΄ν¬ μΌ€μ΄μ¤λ΅ ν‘ν„ν•λ‹¤.

  <!-- prettier-ignore -->
  ```js
  const TAX_RATE = 0.1;
  let preTaxPrice = 100;
  let afterTaxPrice = preTaxPrice + (preTaxPrice * TAX_RATE);
  ```

### const ν‚¤μ›λ“μ™€ κ°μ²΄

`const` ν‚¤μ›λ“λ΅ μ„ μ–Έλ λ³€μμ— **κ°μ²΄λ¥Ό ν• λ‹Ήν• κ²½μ° κ°’μ„ λ³€κ²½ν•  μ μλ‹¤.**

- κ°μ²΄λ” λ³€μ κ°’μ μ¬ν• λ‹Ή μ—†μ΄λ„ μ§μ ‘ λ³€κ²½μ΄ κ°€λ¥ν•κΈ° λ•λ¬Έμ΄λ‹¤.
- κ°μ²΄κ°€ λ³€κ²½λλ”λΌλ„ λ³€μμ— ν• λ‹Ήλ μ°Έμ΅° κ°’μ€ λ³€κ²½λμ§€ μ•λ”λ‹¤.

```js
const person = {
  name: 'Lee',
};
person.name = 'Kim';
console.log(person); // {name: 'Kim'}
```

λ”°λΌμ„ **`const`ν‚¤μ›λ“λ” μ¬ν• λ‹Ήμ„ κΈμ§€ν•  λΏ 'λ¶λ³€'μ„ μλ―Έν•μ§€ μ•λ”λ‹¤** λ” κ²ƒμ— μ μν•΄μ•Όν•λ‹¤.

<br/>

## π“ 15.3 var vs. let vs. const

`var`μ™€ `let`, `const` ν‚¤μ›λ“λ” λ‹¤μκ³Ό κ°™μ΄ μ‚¬μ©ν•λ” κ²ƒμ„ κ¶μ¥ν•λ‹¤.

- ES6λ¥Ό μ‚¬μ©ν•λ‹¤λ©΄ `var` ν‚¤μ›λ“λ” μ‚¬μ©ν•μ§€ μ•λ”λ‹¤.
- μ¬ν• λ‹Ήμ΄ ν•„μ”ν• κ²½μ°μ— ν•μ •ν•΄ `let` ν‚¤μ›λ“λ¥Ό μ‚¬μ©ν•λ‹¤. μ΄λ• λ³€μμ μ¤μ½”ν”„λ” μµλ€ν• μΆκ² λ§λ“ λ‹¤.
- λ³€κ²½μ΄ λ°μƒν•μ§€ μ•κ³  μ½κΈ° μ „μ©μΌλ΅ μ‚¬μ©ν•λ” μƒμ μ›μ‹ κ°’κ³Ό κ°μ²΄μ—λ” `const` ν‚¤μ›λ“λ¥Ό μ‚¬μ©ν•λ‹¤.

λ³€μλ¥Ό μ„ μ–Έν•λ” μ‹μ μ—λ” λ€λ¶€λ¶„ μ¬ν• λ‹Ή ν•„μ” μ—¬λ¶€λ¥Ό μ•κΈ° μ–΄λ ¤μ°λ―€λ΅ μΌλ‹¨ `const` ν‚¤μ›λ“λ¥Ό μ‚¬μ©ν•μ.
